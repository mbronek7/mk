<source>
  @type tail
  path /opt/consumer.log
  tag mylog
  <parse>
    @type none
  </parse>
</source>

<filter mylog>
  @type record_transformer
  <record>
    mp_hostname "#{Socket.gethostname}"
    mp_ip       "#{Socket.ip_address_list[1].ip_address}"
    mp_app      "02-csp-consumer"
    mp_env      "srodowisko"
  </record>
</filter>

<match mylog>
  @type copy
  <store>
    @type elasticsearch
    logstash_format true
    logstash_prefix fluentd
    type_name access_log
    flush_interval 1s
    host 127.0.0.1
    port 9200
  </store>

  <store>
    @type stdout
  </store>
</match>
